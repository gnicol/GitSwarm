# This file is generated by GitLab CI
before_script:
  - ./scripts/prepare_build.sh
  - ruby -v
  - which ruby
  - gem install bundler --no-ri --no-rdoc
  - cp config/gitlab.yml.example config/gitlab.yml
  - touch log/application.log
  - touch log/test.log
  - bundle install --without postgres production --jobs $(nproc)  "${FLAGS[@]}"
  - bundle exec rake db:create RAILS_ENV=test
Rspec:
  script:
    - RAILS_ENV=test SIMPLECOV=true bundle exec rake spec
  tags:
    - ruby
    - mysql

Spinach:
  script:
    - RAILS_ENV=test SIMPLECOV=true bundle exec rake spinach
  tags:
    - ruby
    - mysql

Jasmine:
  script:
    - RAILS_ENV=test SIMPLECOV=true bundle exec rake jasmine:ci
  tags:
    - ruby
    - mysql

Rubocop:
  script:
    - bundle exec rubocop
  tags:
    - ruby
    - mysql

Brakeman:
  script:
    - bundle exec rake brakeman
  tags:
    - ruby
    - mysql
