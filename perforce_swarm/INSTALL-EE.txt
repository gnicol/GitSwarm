                       Installation Instructions for
                              Helix GitSwarm EE

                              Version 2015.4

Introduction

    This document describes the installation and initial configuration
    process for Helix GitSwarm EE release 2015.4.

    * Note, installing and configuring GitSwarm EE is a System Administrator
      function and requires root access.

Hardware Requirements

    Please see the separate "requirements" file, a peer to this file.

Supported Operating System Platforms

    * Ubuntu 12.04 or 14.04
    * CentOS 6.7 or 7


Upgrading

    Please see the separate "upgrade" file, a peer to this file.

Overview

    To get the GitSwarm EE web application installed and configured, this
    document will cover these main areas:

    * Install Dependencies
    * GitSwarm EE Installation
    * Basic Configuration

------------------------------------------------------------------------
Install Dependencies
------------------------------------------------------------------------

Note: If you install Postfix to send email, please select Internet Site
      during setup. Instead of using Postfix, you can also use Sendmail or
      configure a custom SMTP server. Do not use Exim to send email from
      GitSwarm EE.

      We advise installing GitSwarm EE on a fully up-to-date operating system.
      We've included the system specific upgrade commands below.

1. For Ubuntu (12.04 and 14.04):

   $ sudo apt-get update
   $ sudo apt-get upgrade
   $ sudo apt-get install curl openssh-server ca-certificates postfix

2. For CentOS 6:

   $ sudo yum update
   $ sudo yum install curl openssh-server postfix cronie
   $ sudo service postfix start
   $ sudo chkconfig postfix on
   $ sudo lokkit -s http -s ssh

   Note: The commands above also open HTTP and SSH access in the system
         firewall.

3. For CentOS 7:

   $ sudo yum update
   $ sudo yum install curl openssh-server
   $ sudo systemctl enable sshd
   $ sudo systemctl start sshd
   $ sudo yum install postfix
   $ sudo systemctl enable postfix
   $ sudo systemctl start postfix
   $ sudo firewall-cmd --permanent --add-service=http
   $ sudo systemctl reload firewalld

   Note: The commands above also open HTTP and SSH access in the system
         firewall.


------------------------------------------------------------------------
Quick install
------------------------------------------------------------------------

1. For all supported platforms:

   $ curl https://package.perforce.com/bootstrap/gitswarm-ee.sh | sudo sh -



------------------------------------------------------------------------
Post-installation
------------------------------------------------------------------------

1. Verify the external URL for your GitSwarm EE instance:

   View /etc/gitswarm/gitswarm.rb, and verify that the following setting is
   set to the URL that your GitSwarm users should use:

     external_url "http://gitswarm.example.com"

   Edit the setting if necessary.

2. Set the timezone for your GitSwarm EE instance:

   Edit /etc/gitswarm/gitswarm.rb, and edit the line:

     #gitlab_rails['time_zone'] = 'UTC'

   Replace UTC with an appropriate timezone, and uncomment the line.

3. Configure GitSwarm EE.

   If you have made changes to /etc/gitswarm/gitswarm.rb, then you will
   want to run reconfigure for them to take effect.

   $ sudo gitswarm-ctl reconfigure

4. Browse to the hostname and login.

   Username: root
   Password: 5iveL!fe

------------------------------------------------------------------------
Troubleshooting
------------------------------------------------------------------------

For additional troubleshooting and configuration options, please see
the Omnibus GitLab readme at
https://gitlab.com/gitlab-org/omnibus-gitlab/blob/master/README.md

error: "X" is an unknown key on CentOS 6

    This error occurs during install of CentOS 6, often in a shared VM
    environment where some of the keys in `/etc/sysctl.conf` don't actually
    apply. The error usually looks something like this:


    STDERR: error: "net.bridge.bridge-nf-call-ip6tables" is an unknown key
    error: "net.bridge.bridge-nf-call-iptables" is an unknown key
    error: "net.bridge.bridge-nf-call-arptables" is an unknown key

    These errors are ignorable, you just need to run 'sudo gitswarm-ctl
    reconfigure', and our script shouldn't have to modify that file again
    and will continue. If you want to future-proof upgrades from failing on
    the same lines, you can modify your '/etc/sysctl.conf' and comment out
    the keys that were listed as unknown.

END
