                             Release Notes for
                      Helix GitSwarm Enterprise Edition

                              Version 2016.1

Introduction

    Helix GitSwarm Enterprise Edition (EE) extends the Gitlab Enterprise
    Edition (EE) software to let users using Git maintain their code
    repositories in Perforce Helix, facilitating contributions and
    collaboration between users using Git and users using P4 on complex
    products containing source code and binaries. Additionally, by
    maintaining the code repository in the Helix Versioning Engine,
    GitSwarm EE enables an enterprise to manage and secure all of its
    Intellectual Property (IP) in one place.

    GitSwarm EE offers additional features on top of the base GitSwarm
    offering, such as LDAP group synchronization, sharing of native
    GitSwarm projects with other groups, Git hooks, and Atlassian Jira
    integration.

    Please send all feedback to support@perforce.com.

---------------------------------------------------------------------------

Documentation

    GitSwarm EE Release 2016.1 documentation is included in the distribution
    and can be accessed from within GitSwarm EE from the "?" menu on the top
    toolbar. The latest GitSwarm EE Release documentation can be found online
    at: https://www.perforce.com/perforce/doc.current/manuals/gitswarm-ee/

Supported Client Browsers

    GitSwarm EE supports the following client web browsers and versions:

    * Chrome (Latest stable version)
    * Firefox (Latest released version and latest ESR version)
    * Safari 7+ (known problem: required fields in html5 do not work)
    * Opera (Latest released version)
    * IE 10+

    We recommend the use of the latest stable version of the browsers
    listed above for the best experience when using GitSwarm EE.

    Other web browsers might also work, including prior, development or
    beta builds of the above web browsers, but these browsers are not
    officially supported.

Installation and Supported Platforms

    Please see the separate "install" file, a peer to this file.

Upgrading

    Please see the separate "upgrade" file, a peer to this file.

Known Issues

    * Importing large repos into GitSwarm EE can take long enough that a
      timeout is reached, causing the import to fail. The workaround is
      to manually prepare a local repository, and push that repo into
      GitSwarm EE.

    * Git Fusion HTTP(S) authentication is not supported on CentOS 7 or
      Red Hat Enterprise Linux 7.

---------------------------------------------------------------------------

Major new functionality in 2015.4

    #d1e79253, #a6b4510f (PGL-1236)
       Mirror existing GitSwarm EE project into Helix

    #e0d6ed64 (PGL-1201)
       Support restoring GitLab EE 8.0 backups into GitSwarm EE 2015.4

    GitLab 8.0
        - Add fast-forward merge option in project settings
        - Add "replace" and "upload" functionalities to allow user replace existing file and upload new file into current repository
        - Remove satellites
        - Ability to fetch merge requests from refs/merge-requests/:id
        - Added Drone CI integration (Kirill Zaitsev)
        - Allow developers to retry builds
        - Add support for Crowd
        - Global Labels that are available to all projects
        - Add FogBugz project import (Jared Szechy)

    GitLab 7.14
        - Automatic approver suggestions (based on an authority of the code)
        - Add support for Jenkins unstable status
        - Add support for destroying project milestones (Stan Hu)
        - Allow custom backup archive permissions
        - Send notification to all participants when MR is merged.
        - Add support for CI skipped status
        - Fetch code from forks to refs/merge-requests/:id/head when merge request created
        - Add "Check out branch" button to the MR page.
        - Support Kerberos ticket-based authentication for Git HTTP access

Minor new functionality in 2015.4

    #fc65efd2 (PGL-1364)
       Install GitSwarm EE via bootstrap shell script

    #33aae928 (PGL-1270)
        Cleanse removes the p4dctl config file

    #3d53a333 (PGL-1241)
        Update GitSwarm EE logo and favicon

    #1651e961, #2e87e04a (PGL-1235, PGL-1234)
        Add Mirror in Helix button to project details

    #1d9d67b5, #798e27d7 (PGL-1067)
        Renamed the misleading "default" git fusion config block to "local"

    GitLab 8.0
        - Guests and Reporters can approve merge request as well
        - Separate rebase & fast-forward merge features
        - Clarify confirmation text on user deletion
        - Make commit graphs responsive to window width changes (Stan Hu)
        - Remove git refs used internally by GitLab from network graph (Stan Hu)
        - Use standard Markdown font in Markdown preview instead of fixed-width font (Stan Hu)
        - Add option to use StartTLS with Reply by email IMAP server.
        - Improve CI migration procedure and documentation
        - Gracefully handle errors in syntax highlighting by leaving the block unformatted (Stan Hu)
        - Sort issues by creation date in Bitbucket importer (Stan Hu)
        - Remove user OAuth tokens from the database and request new tokens each session (Stan Hu)
        - Restrict users API endpoints to use integer IDs (Stan Hu)
        - Better performance for web editor (switched from satellites to rugged)
        - Faster merge
        - Allow displaying of archived projects in the admin interface (Artem Sidorenko)
        - Allow configuration of import sources for new projects (Artem Sidorenko)
        - Create cross-reference for closing references on commits pushed to non-default branches (Maël Valais)
        - Ability to search milestones
        - Move dashboard activity to separate page (for your projects and starred projects)
        - Improve performance of git blame
        - Limit content width to 1200px for most of pages to improve readability on big screens
        - Bring more UI consistency in way how projects, snippets and groups lists are rendered
        - Make all profiles and group public
        - Retrieving oauth token with LDAP credentials
        - Load Application settings from running database unless env var USE_DB=false
        - Hide advanced project options for non-admin users
        - Refactored service API and added automatically service docs generator (Kirill Zaitsev)
        - Added web_url key project hook_attrs (Kirill Zaitsev)
        - Add ability to get user information by ID of an SSH key via the API
        - Project notification level can be set on the project page itself
        - Added service API endpoint to retrieve service parameters (Petheő Bence)
        - Sort users autocomplete lists by user (Allister Antosik)
        - Webhook for issue now contains repository field (Jungkook Park)
        - Add ability to add custom text to the help page (Jeroen van Baarsen)
        - Add pg_schema to backup config
        - Removed API calls from CE to CI

    GitLab 7.14
        - Improve abuse reports management from admin area
        - Only include base URL in OmniAuth full_host parameter (Stan Hu)
        - Ability to enable SSL verification for Webhooks
        - Allow configuration of LDAP attributes GitLab will use for the new user account.
        - Update default robots.txt rules to disallow crawling of irrelevant pages (Ben Bodenmiller)
        - Upgrade gitlab_git to 7.2.14 to ignore CRLFs in .gitmodules (Stan Hu)
        - Provide more feedback what went wrong if HipChat service failed test (Stan Hu)
        - Bump Haml to 4.0.7 to speed up textarea rendering (Stan Hu)
        - Show incompatible projects in Bitbucket import status (Stan Hu)
        - Always add current user to autocomplete controller to support filter by "Me" (Stan Hu)
        - Add "Confirm user" button in user admin page (Stan Hu)
        - Add support for Unicode filenames in relative links (Hiroyuki Sato)
        - Return comments in created order in merge request API (Stan Hu)
        - Disable internal issue tracker controller if external tracker is used (Stan Hu)
        - Expire Rails cache entries after two weeks to prevent endless Redis growth
        - Add project star and fork count, group avatar URL and user/group web URL attributes to API
        - Show who last edited a comment if it wasn't the original author
        - Add ability to manage user email addresses via the API.
        - Show buttons to add license, changelog and contribution guide if they're missing.
        - Tweak project page buttons.
        - Mention group and project name in creation, update and deletion notices (Achilleas Pipinellis)
        - Update gravatar link on profile page to link to configured gravatar host (Ben Bodenmiller)
        - Remove comments and email addresses when publicly exposing ssh keys (Zeger-Jan van de Weg)
        - Improve MR merge widget text and UI consistency.
        - Improve text in MR "How To Merge" modal.
        - Cache all events
        - Order commits by date when comparing branches
        - Include branch/tag name in archive file and directory name
        - Add dropzone upload progress
        - Add a label for merged branches on branches page (Florent Baldino)
        - Detect .mkd and .mkdn files as markdown (Ben Boeckel)
        - Set max-width for README, issue and merge request description for easier read on big screens
        - Update Flowdock integration to support new Flowdock API (Boyan Tabakov)
        - Remove author from files view (Sven Strickroth)

Bugs fixed in 2015.4

    #2f267684 (PGL-1286)
        Helix Git Fusion Server dropdown blows out page with long URLs

    #d6df3abc (PGL-1229)
        Prevent installing GitSwarm EE overtop of GitLab

    #04944d0d (PGL-1213)
        Fixes WRITE_LOCK_SOCKET is not a valid socket error when group or
        project name is long

    #440103c3 (PGL-1182)
        Set LANG before connecting to git fusion to reduce chance of errors when
        communicating with Helix Git Fusion

    #6967d6ba (PGL-1122)
        Only update the p4d root user when GitSwarm EE's root user password changes
        if GitSwarm EE's root user is still and admin.

    #17386be8 (PGL-1073)
        Improve error message when there is a problem reading gitswarm.rb

    #3a25f71b, #9bc23c5d (PGL-1058)
        Reinstalling gitswarm after an uninstall results in a fatal error during reconfigure

    #02b39207 (PGL-1051)
        Make sure the P4 client name is not initially set as the hostname

    #4cc7824c, #a3e13281, #cde228c3 (PGL-1044)
        Fixed issue where too many piled up mirror processes caused a failover
        of the gitswarm server

    GitLab 8.0
        - "Multi-project" and "Treat unstable builds as passing" parameters for
          the Jenkins CI service are now correctly persisted.
        - Correct the build URL when "Multi-project" is enabled for the Jenkins CI
          service.
        - Fix multi-project setup for Jenkins
        - Correct gem dependency versions
        - Re-add the "Help Text" feature that was inadvertently removed
        - Fix navigation issue when viewing Group Settings pages
        - Correct lookup-by-email for LDAP logins
        - Fix loading spinner sometimes not being hidden on Merge Request tab switches
        - Fix Message-ID header to be RFC 2111-compliant to prevent e-mails being dropped (Stan Hu)
        - Fix referrals for :back and relative URL installs
        - Fix anchors to comments in diffs
        - Remove CI token from build traces
        - Fix "Assign All" button on Runner admin page
        - Fix URL shown in Slack notifications
        - Fix bug where projects would appear to be stuck in the forked import state (Stan Hu)
        - Fix Error 500 in creating merge requests with > 1000 diffs (Stan Hu)
        - Fix default avatar not rendering in network graph (Stan Hu)
        - Skip check_initd_configured_correctly on omnibus installs
        - Prevent double-prefixing of help page paths
        - Fix top margin for sign-in button on public pages
        - Fix LDAP attribute mapping
        - Fix Reply by email for non-UTF-8 messages.
        - Fix Markdown links not showing up in dashboard activity feed (Stan Hu)
        - Remove milestones from merge requests when milestones are deleted (Stan Hu)
        - Fix HTML link that was improperly escaped in new user e-mail (Stan Hu)
        - Fix broken sort in merge request API (Stan Hu)
        - Bump rouge to 1.10.1 to remove warning noise and fix other syntax highlighting bugs (Stan Hu)
        - Fix URL construction for merge requests, issues, notes, and commits for relative URL config (Stan Hu)
        - Fix emoji URLs in Markdown when relative_url_root is used (Stan Hu)
        - Omit filename in Content-Disposition header in raw file download to avoid RFC 6266 encoding issues (Stan HU)
        - Fix broken Wiki Page History (Stan Hu)
        - Import forked repositories asynchronously to prevent large repositories from timing out (Stan Hu)
        - Prevent anchors from being hidden by header (Stan Hu)
        - Fix bug where only the first 15 Bitbucket issues would be imported (Stan Hu)
        - Prevent too many redirects upon login when home page URL is set to external_url (Stan Hu)
        - Improve dropdown positioning on the project home page (Hannes Rosenögger)
        - Upgrade browser gem to 1.0.0 to avoid warning in IE11 compatibilty mode (Stan Hu)
        - Only show recent push event if the branch still exists or a recent merge request has not been created (Stan Hu)
        - Search for comments should be case insensetive
        - Gracefully handle SMTP user input errors (e.g. incorrect email addresses) to prevent Sidekiq retries (Stan Hu)
        - Fix 500 error when submit project snippet without body
        - Improve search page usability
        - Fixed login failure when extern_uid changes (Joel Koglin)
        - Don't notify users without access to the project when they are (accidentally) mentioned in a note
        - Fail builds if no .gitlab-ci.yml is found
        - Fix bug which IE cannot show image at markdown when the image is raw file of gitlab
        - Fix highlighting of deleted lines in diffs.

    GitLab 7.14
        - Fix sign in form when just Kerberos is enabled
        - Fix the rebase before merge feature
        - Fix importing projects from GitHub Enterprise Edition.
        - Disable adding, updating and removing members from a group that is synced with LDAP
        - Don't send "Added to group" notifications when group is LDAP synch
        - Fix "Reload with full diff" URL button in compare branch view (Stan Hu)
        - Fix Error 500 in API when accessing a group that has an avatar (Stan Hu)
        - Upgrade gitlab_git to 7.2.15 to fix `git blame` errors with ISO-encoded files (Stan Hu)
        - Fix bug where non-project members of the target project could set labels on new merge requests.
        - Fix redirection after sign in when using auto_sign_in_with_provider
        - Clear cache to prevent listing deleted branches after MR removes source branch (Stan Hu)
        - Fix bug where backslashes in inline diffs could be dropped (Stan Hu)
        - Disable turbolinks when linking to Bitbucket import status (Stan Hu)
        - Fix broken code import and display error messages if something went wrong with creating project (Stan Hu)
        - Fix corrupted binary files when using API files endpoint (Stan Hu)
        - Fix coloring of diffs on MR Discussion-tab (Gert Goet)
        - Fix "Network" and "Graphs" pages for branches with encoded slashes (Stan Hu)
        - Fix errors deleting and creating branches with encoded slashes (Stan Hu)
        - Fix multi-line syntax highlighting (Stan Hu)
        - Fix network graph when branch name has single quotes (Stan Hu)
        - Upgrade gitlab_git to version 7.2.6 to fix Error 500 when creating network graphs (Stan Hu)
        - Fix URL used for refreshing notes if relative_url is present (Bartłomiej Święcki)
        - Fix commit data retrieval when branch name has single quotes (Stan Hu)
        - Check that project was actually created rather than just validated in import:repos task (Stan Hu)
        - Fix full screen mode for snippet comments (Daniel Gerhardt)
        - Fix 404 error in files view after deleting the last file in a repository (Stan Hu)
        - Fix the "Reload with full diff" URL button (Stan Hu)
        - Fix label read access for unauthenticated users (Daniel Gerhardt)
        - Fix access to disabled features for unauthenticated users (Daniel Gerhardt)
        - Fix OAuth provider bug where GitLab would not go return to the redirect_uri after sign-in (Stan Hu)
        - Fix file upload dialog for comment editing (Daniel Gerhardt)
        - Set OmniAuth full_host parameter to ensure redirect URIs are correct (Stan Hu)
        - Disabled autocapitalize and autocorrect on login field (Daryl Chan)
        - Fix bug causing error when the target branch of a symbolic ref was deleted
        - Fix: User search feature in admin area does not respect filters
        - Fix infinite loop when SAML was incorrectly configured.ed

Major new functionality in 2015.3

    #8491fa96, #d307adc4, #eb9349ae, #fc04a46a (PGL-841, PGL-842, PGL-849, PGL-859, PGL-860, PGL-861)
        Introduced a new all-in-one package that includes a default Helix Server for trying out the product

    #a8940a55, #5fe7603f (PGL-993, PGL-997, PGL-1043)
        Add configuration options for connecting to multiple Git Fusion Servers

    #61ff0890, #93bd4d8a, #cf5ff0c8 (PGL-995, PGL-996, PGL-998, PGL-999, PGL-1050)
        Add support for creating new repos in Git Fusion when creating a new project

    GitLab 7.13
        - Ability to define merge request approvers
        - Allow users to send abuse reports
        - Support commenting on diffs in side-by-side mode (Stan Hu)
        - Allow users to customize their default Dashboard page.
        - Reporter role can manage issue tracker now: edit any issue, set assignee or milestone and manage labels
        - Redesign project page. Show README as default instead of activity. Move project activity to separate page

Minor new functionality in 2015.3

    #2834d83c, #65e0d404 (PGL-992)
        Added support for a global Git Fusion config section for setting defaults across multiple Git Fusion servers

    #562da480, #3fd23a8b (PGL-1016)
        Provided a check for determining if your connected Git Fusion servers meet our minimum version requirements

    #a4490a66 (PGL-1033)
        When connecting a new Git Fusion server, we add the server to the ssh trust list the first time it is used

    #40b18cb3 (PGL-1034, PGL-1054, PGL-1078)
        Improved error messages in the UI when trying to create a mirrored project

    #f8311f34 (PGL-1096)
        Increased our merge timeout values so mirrored merges have a bit more time

    GitLab 7.13
        - Reset approvals on push
        - Don't resend admin email to everyone if one delivery fails
        - Improved validation for an approver
        - Add admin_merge_request ability to Developer level and up
        - Show the first tab automatically on MergeRequests#new
        - Only enable HSTS header for HTTPS and port 443 (Stan Hu)
        - Add branch switching support for graphs (Daniel Gerhardt)
        - Add support for unlocking users in admin settings (Stan Hu)
        - Add Irker service configuration options (Stan Hu)
        - Add `two_factor_enabled` field to admin user API (Stan Hu)
        - Admin can edit and remove user identities
        - Convert CRLF newlines to LF when committing using the web editor.
        - API request /projects/:project_id/merge_requests?state=closed will return only closed merge requests without merged one. If you need ones that were merged - use state=merged.
        - Allow Administrators to filter the user list by those with or without Two-factor Authentication enabled.
        - Show a user's Two-factor Authentication status in the administration area.
        - Better performance for pages with events list, issues list and commits list
        - Allow users to be blocked and unblocked via the API
        - Use native Postgres database cleaning during backup restore
        - Make left menu more hierarchical and less contextual by adding back item at top
        - Allow administrators to disable 2FA for a specific user

Bugs fixed in 2015.3

    #b480a7e7
        Fixed a race condition during setup of the database and the database user

    #61336ea4 (PGL-1007)
        Fixed an issue where certain URL parameters broke the version check

    #42546246 (PGL-816, PGL-817)
        Fixed an issue where check for updates status changes would cause a page reload

    GitLab 7.13
        - Fix git hook validation on initial push to master branch.
        - Fix 500 error when the source project of an MR is deleted
        - Fix: "Rebase before merge" doesn't work when source branch is in the same project
        - Fix group web hook
        - Fix bug causing Bitbucket importer to crash when OAuth application had been removed.
        - Fix Error 500 when browsing projects with no HEAD (Stan Hu)
        - Fix labels / assignee / milestone for the merge requests when issues are disabled
        - Fix: Label modifications are not reflected in existing notes and in the issue list
        - Fix: Label not shown in the Issue list, although it's set through web interface
        - Fix: Group/project references are linked incorrectly
        - Fix of migration: Check if session_expire_delay column exists before adding the column
        - Fix: ActionView::Template::Error
        - Fix: "Create Merge Request" isn't always shown in event for newly pushed branch
        - Fix bug causing "Remove source-branch" option not to work for merge requests from the same project.
        - Render Note field hints consistently for "new" and "edit" forms
        - Remove repository graph log to fix slow cache updates after push event (Stan Hu)
        - Fix user autocomplete for unauthenticated users accessing public projects (Stan Hu)
        - Fix redirection to home page URL for unauthorized users (Daniel Gerhardt)
        - Fix external issue tracker hook/test for HTTPS URLs (Daniel Gerhardt)
        - Remove link leading to a 404 error in Deploy Keys page (Stan Hu)
        - Fix order of issues imported from GitHub (Hiroyuki Sato)
        - Bump rugments to 1.0.0beta8 to fix C prototype function highlighting (Jonathon Reinhart)
        - Fix Merge Request webhook to properly fire "merge" action when accepted from the web UI
        - Fix invalid timestamps in RSS feeds (Rowan Wookey)
        - Fix downloading of patches on public merge requests when user logged out (Stan Hu)
        - Fix Error 500 when relative submodule resolves to a namespace that has a different name from its path (Stan Hu)
        - Extract the longest-matching ref from a commit path when multiple matches occur (Stan Hu)
        - Fix JavaScript error when clicking on the comment button on a diff line that has a comment already (Stan Hu)
        - Return 40x error codes if branch could not be deleted in UI (Stan Hu)
        - Update ssl_ciphers in Nginx example to remove DHE settings. This will deny forward secrecy for Android 2.3.7, Java 6 and OpenSSL 0.9.8
        - Users with guest access level can not set assignee, labels or milestones for issue and merge request
        - Correctly show anonymous authorized applications under Profile > Applications.
        - A fork can’t have a visibility level that is greater than the original project.
        - Faster code search in repository and wiki. Fixes search page timeout for big repositories
        - Add error message for SSH key linebreaks

Credits

    Helix GitSwarm Enterprise Edition, based on the excellent GitLab Enterprise
    Edition software with additional contributions from the GitSwarm Team:
    DJ Mountney, Elliot Wiltshire, Geoff Nicol, Jayesh Mistry,
    Jan Van Uytven, Elizabeth Hale, Porus Patell, Tony Kim, Ewan Edwards,
    Sean Ardley, Russ Tremain, Murtaza Amiji, Jason Novecosky, Michael Davies,
    Janet Taylor, Darrell Robins, Scott Wellard, Patrycja Tomiak, Samuel Penn,
    David Birch, Martin Phillips, Chris Lesemann, Doris Wong, Brad Martin, and
    Colin Grant.

END
